======================================================================
DESIGN AREA 14 — USER INTERACTION, DECISION POINTS & POLICY HANDLING
======================================================================

Status:
-------
CORE — this area defines *how Turnix asks the user questions*, *when it is
allowed to pause execution*, *how decisions are persisted*, and *how policy
prevents repeated friction*.


----------------------------------------------------------------------
1. CORE INTENT
----------------------------------------------------------------------

Turnix must:
- never make ambiguous decisions silently
- never spam the user unnecessarily
- remain deterministic once a decision is made

User interaction exists to resolve:
- ambiguity
- permission
- conflict
- recovery


----------------------------------------------------------------------
2. USER INTERACTION IS A SYSTEM CONCERN (LOCKED)
----------------------------------------------------------------------

User interaction is NOT:
- UI-specific
- mod-specific
- frontend-specific

User interaction IS:
- kernel-mediated
- policy-driven
- serializable
- traceable


----------------------------------------------------------------------
3. DECISION POINT TYPES (LOCKED)
----------------------------------------------------------------------

3.1 Resolution Decisions
------------------------
Examples:
- multiple eligible packs
- semver mismatch override
- pinned pack missing
- last known good fallback

Outcome:
- chosen pack
- persisted rule


3.2 Permission Decisions
------------------------
Examples:
- external network access
- file system writes
- mod installation
- capability requiring trust

Outcome:
- allow / deny
- optional “remember” flag


3.3 Recovery Decisions
----------------------
Examples:
- corrupted config
- unreadable save
- missing dependency
- failed migration

Outcome:
- retry
- reset
- abort
- ignore (if allowed)


----------------------------------------------------------------------
4. HARD VS SOFT DECISIONS (LOCKED)
----------------------------------------------------------------------

4.1 Soft Decisions
------------------
Characteristics:
- execution can continue if denied
- denial does not break identity
- may be auto-allowed by policy

Examples:
- version mismatch warning
- optional capability usage


4.2 Hard Decisions
------------------
Characteristics:
- execution must pause
- denial blocks progress
- user must explicitly respond

Examples:
- installing a mod
- replacing pinned pack
- destructive operation


----------------------------------------------------------------------
5. PAUSING MODEL (LOCKED)
----------------------------------------------------------------------

When a decision is required:
- the triggering execution unit pauses
- other unrelated activity may continue
- UI is notified via kernel event
- decision is awaited

No busy waiting.
No polling loops.


----------------------------------------------------------------------
6. POLICY SYSTEM (LOCKED)
----------------------------------------------------------------------

Policies define default behavior when a decision arises.

Policy sources:
- global defaults
- user overrides
- pack-specified hints (non-binding)

Policies can specify:
- ask always
- allow once
- allow always
- deny always (if permitted)


----------------------------------------------------------------------
7. POLICY PERSISTENCE (LOCKED)
----------------------------------------------------------------------

When a user makes a decision:
- it is persisted centrally
- future runs become deterministic
- trace links decision to origin

Policies are:
- explicit
- inspectable
- editable via PackManager UI


----------------------------------------------------------------------
8. UI RESPONSIBILITY (LOCKED)
----------------------------------------------------------------------

UI must:
- present clear explanation
- show consequences
- offer minimal valid choices
- never hide denial impact

UI must NOT:
- invent defaults
- auto-confirm without policy
- bypass kernel


----------------------------------------------------------------------
9. MULTIPLE FRONTENDS (LOCKED)
----------------------------------------------------------------------

If multiple frontends are connected:
- decision is shown on all
- first valid response wins
- others are dismissed

Kernel remains the arbiter.


----------------------------------------------------------------------
10. FAILURE MODES (LOCKED)
----------------------------------------------------------------------

If UI disconnects during decision:
- execution remains paused
- timeout policy may apply
- user can reconnect

If decision handler errors:
- execution aborts safely
- error is trace-logged


----------------------------------------------------------------------
11. MOD INVOLVEMENT (LOCKED)
----------------------------------------------------------------------

Mods:
- may trigger decision points
- may not handle them directly
- must not block awaiting UI themselves

Mods observe outcomes via ctx.


----------------------------------------------------------------------
12. RELATION TO DEBUGGING (LOCKED)
----------------------------------------------------------------------

Decision points:
- can trigger breakpoints
- are trace-visible
- are inspectable post-factum

Debugger may simulate decisions
in development mode only.


----------------------------------------------------------------------
13. WHAT IS EXPLICITLY NOT SUPPORTED
----------------------------------------------------------------------

NOT SUPPORTED:
- silent auto-approval without policy
- console-based prompting
- blocking entire system for UI
- mod-defined decision UIs


----------------------------------------------------------------------
14. OPEN QUESTIONS
----------------------------------------------------------------------

OPEN:
- bulk decision management UI
- policy import/export
- per-session vs global policies
- scripting policy rules


----------------------------------------------------------------------
15. LOCKED SUMMARY
----------------------------------------------------------------------

LOCKED:
- kernel-mediated user decisions
- hard vs soft distinction
- pause-and-resume model
- persistent policies
- frontend-agnostic handling

OPEN:
- advanced policy automation
- UX refinements


----------------------------------------------------------------------
END OF DESIGN AREA 14
----------------------------------------------------------------------

